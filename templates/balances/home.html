{% extends 'base.html' %}
{% load static %}

{% block title %}Inicio - CuentasClaras{% endblock %}

{% block content %}
<section class="bg-primary-light py-20 text-neutral">
    <div class="container mx-auto flex flex-col md:flex-row items-center">
        <div class="md:w-1/2 text-center md:text-left">
            <h1 class="text-4xl font-bold mb-6 text-neutral">¡Bienvenido a Cuentas Claras!</h1>
            <p class="text-lg mb-6 text-neutral">
                Aquí transformamos los problemas de pagos desiguales en soluciones simples y eficientes. Con nuestra plataforma, podrás organizar tus gastos de manera justa, equitativa y con tan solo un clic. ¡Haz que cada pago cuente!
            </p>
            <div class="flex justify-center md:justify-start space-x-4">
                <a href="{% url 'input_data' %}" class="bg-secondary text-neutral py-2 px-4 rounded-full hover:bg-secondary-dark">Simular Gastos</a>
                <a href="#" class="bg-secondary text-neutral py-2 px-4 rounded-full hover:bg-secondary-dark">Crear Cuenta</a>
            </div>
        </div>
        <div class="md:w-1/2 mt-10 md:mt-0">
            <!-- <img src="{% static 'img/Pagar_la_cena.jpg' %}" alt="Personas compartiendo cuentas en un restaurante" class="rounded-lg shadow-lg"> -->
            <div id="glb-container" style="width: 100%; height: 400px;"></div>
        </div>
    </div>
</section>

<section class="py-40 bg-primary-accent relative">
  <div class="absolute inset-0">
      <img src="{% static 'img/flechas_saliendo_pantalla.jpg' %}" alt="Gráfica en pantalla" class="w-full h-full object-cover opacity-50 blur-sm">
  </div>
  <div class="container mx-auto relative z-10 text-center">
      <div class="bg-secondary text-neutral py-4 px-8 rounded-full inline-block shadow-md hover:bg-secondary-dark">
          <a href="{% url 'input_data' %}" class="text-xl font-bold ">Simular Gastos</a>
      </div>
  </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Seleccionar el contenedor
    const container = document.getElementById("glb-container");

    // Crear la escena
    const scene = new THREE.Scene();

    // Agregar la cámara
    const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.set(0, 1, 5);

    // Agregar el renderizador
    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    // Agregar luz
    const light = new THREE.AmbientLight(0xffffff, 1);
    scene.add(light);

    // Cargar el modelo GLB
    const loader = new THREE.GLTFLoader();
    loader.load("/static/img/Animation/Logo_Animation.glb", function (gltf) {
    const model = gltf.scene;

    // Calcular la caja de límites del modelo
    const box = new THREE.Box3().setFromObject(model);
    const center = box.getCenter(new THREE.Vector3());

    // Centrar el modelo en el eje (0,0,0)
    model.position.sub(center);

    // Ajustar la escala si es necesario
    model.scale.set(1, 1, 1);  // Ajusta según el tamaño deseado

    scene.add(model);

    // Animar el modelo para que gire en su centro
    function animate() {
        requestAnimationFrame(animate);
        model.rotation.y += 0.01; // Rotación en el eje Y
        renderer.render(scene, camera);
    }
    animate();
}, undefined, function (error) {
    console.error("Error cargando el modelo GLB:", error);
});

    // Ajustar tamaño al cambiar la ventana
    window.addEventListener("resize", function () {
        renderer.setSize(container.clientWidth, container.clientHeight);
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
    });
});
</script>
{% endblock %}

